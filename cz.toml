# ====================================================================
# Commitizen é…ç½® - FastAPI é¡¹ç›®æäº¤è§„èŒƒ
# ====================================================================
#
# 15 ç§æäº¤ç±»å‹ (ALL_TYPES):
#   âœ¨ feat | ğŸ› fix | â™»ï¸ refactor | âš¡ï¸ perf | ğŸ”’ security |
#   â¬†ï¸ upgrade |
#   ğŸ”§ chore | ğŸ—ï¸ build | ğŸ‘· ci | ğŸ“ docs |
#   ğŸ¨ style | âœ… test | ğŸ”¥ remove | âª revert | ğŸ‰ init
#
# è§¦å‘ç‰ˆæœ¬å·å˜æ›´çš„æäº¤ç±»å‹ 6ç§ (BUMP_TYPES):
#   âœ¨ feat | ğŸ› fix | â™»ï¸ refactor | âš¡ï¸ perf | ğŸ”’ security | â¬†ï¸ upgrade
#
# å‡ºç°åœ¨ CHANGELOG çš„æäº¤ç±»å‹ 10ç§ (CHANGELOG_TYPES):
#   âœ¨ feat | ğŸ› fix | â™»ï¸ refactor | âš¡ï¸ perf | ğŸ”’ security | â¬†ï¸ upgrade |
#   ğŸ”§ chore | ğŸ—ï¸ build | ğŸ‘· ci | ğŸ“ docs
#
# ç»´æŠ¤æ€§æäº¤ (ä¸è§¦å‘ç‰ˆæœ¬å·ã€ä¸å‡ºç°åœ¨ CHANGELOG):
#   ğŸ‰ init | ğŸ¨ style | âœ… test | ğŸ”¥ remove | âª revert
# ====================================================================

[tool.commitizen]
name = "cz_customize"
tag_format = "$version"
version_scheme = "pep440"
version_provider = "uv"
version_files = ["pyproject.toml:version"]
update_changelog_on_bump = true
bump_message = "ğŸ”– release(version): bump version $current_version â†’ $new_version"

[tool.commitizen.bump]
commit = true
tag = true
push = false

[tool.commitizen.customize]
message_template = "{{change_type}}{% if scope %}({{scope}}){% endif %}: {{subject}}{% if body %}\n\n{{body}}{% endif %}{% if footer %}\n\n{{footer}}{% endif %}"
example = "âœ¨ feat(system/user): æ–°å¢ç”¨æˆ·ç™»å½•æ¥å£"
schema = """
<type>(<scope>): <subject>
<BLANK LINE>
<body>
<BLANK LINE>
<footer>
"""
# æ­£åˆ™æ¨¡å¼ - å…è®¸æ‰€æœ‰ 15 ç§æäº¤ç±»å‹
schema_pattern = "^(âœ¨ feat|ğŸ› fix|â™»ï¸ refactor|âš¡ï¸ perf|ğŸ”’ security|â¬†ï¸ upgrade|ğŸ‰ init|ğŸ”§ chore|ğŸ—ï¸ build|ğŸ‘· ci|ğŸ“ docs|ğŸ¨ style|âœ… test|ğŸ”¥ remove|âª revert)(\\([^)]+\\))?:\\s.+"
# ç‰ˆæœ¬å·å˜æ›´è§„åˆ™ - ä»…è§¦å‘ç‰ˆæœ¬å·çš„æäº¤ç±»å‹
bump_pattern = "^(âœ¨ feat|ğŸ› fix|â™»ï¸ refactor|âš¡ï¸ perf|ğŸ”’ security|â¬†ï¸ upgrade)"
bump_map = { "âœ¨ feat" = "MINOR", "ğŸ› fix" = "PATCH", "â™»ï¸ refactor" = "PATCH", "âš¡ï¸ perf" = "PATCH", "ğŸ”’ security" = "PATCH", "â¬†ï¸ upgrade" = "MINOR" }
# CHANGELOG ä¸­å±•ç¤ºçš„æäº¤ç±»å‹é¡ºåº
change_type_order = [
  "BREAKING CHANGE",
  "âœ¨ feat",
  "ğŸ› fix",
  "â™»ï¸ refactor",
  "âš¡ï¸ perf",
  "ğŸ”’ security",
  "â¬†ï¸ upgrade",
  "ğŸ”§ chore",
  "ğŸ—ï¸ build",
  "ğŸ‘· ci",
  "ğŸ“ docs",
]
# æäº¤æ¶ˆæ¯è§£æå™¨ - è§£ææ‰€æœ‰ 15 ç§æäº¤ç±»å‹
commit_parser = "^(?P<change_type>âœ¨ feat|ğŸ› fix|â™»ï¸ refactor|âš¡ï¸ perf|ğŸ”’ security|â¬†ï¸ upgrade|ğŸ”§ chore|ğŸ—ï¸ build|ğŸ‘· ci|ğŸ“ docs|ğŸ¨ style|âœ… test|ğŸ”¥ remove|âª revert|ğŸ‰ init)(?:\\((?P<scope>[^)]+)\\))?(?P<breaking>!)?:\\s(?P<message>.+)"
# CHANGELOG è¿‡æ»¤è§„åˆ™ - æ’é™¤ç»´æŠ¤æ€§æäº¤ (style, test, remove, revert, init)
changelog_pattern = "^(âœ¨ feat|ğŸ› fix|â™»ï¸ refactor|âš¡ï¸ perf|ğŸ”’ security|â¬†ï¸ upgrade|ğŸ”§ chore|ğŸ—ï¸ build|ğŸ‘· ci|ğŸ“ docs|BREAKING CHANGE)?(!)?"
# CHANGELOG ä¸­çš„ç±»å‹æ˜ å°„ (ä¸­æ–‡æ˜¾ç¤º)
change_type_map = { "âœ¨ feat" = "âœ¨ æ–°åŠŸèƒ½", "ğŸ› fix" = "ğŸ› é—®é¢˜ä¿®å¤", "â™»ï¸ refactor" = "â™»ï¸ ä»£ç é‡æ„", "âš¡ï¸ perf" = "âš¡ï¸ æ€§èƒ½ä¼˜åŒ–", "ğŸ”’ security" = "ğŸ”’ å®‰å…¨ä¿®å¤", "â¬†ï¸ upgrade" = "â¬†ï¸ ä¾èµ–å‡çº§", "ğŸ”§ chore" = "ğŸ”§ æ—¥å¸¸ç»´æŠ¤", "ğŸ—ï¸ build" = "ğŸ—ï¸ æ„å»ºç›¸å…³", "ğŸ‘· ci" = "ğŸ‘· CI/CD", "ğŸ“ docs" = "ğŸ“ æ–‡æ¡£æ›´æ–°", "BREAKING CHANGE" = "ğŸ’¥ ç ´åæ€§å˜æ›´" }

[[tool.commitizen.customize.questions]]
type = "list"
name = "change_type"
message = "è¯·é€‰æ‹©æœ¬æ¬¡æäº¤çš„ç±»å‹:"
choices = [
  { value = "âœ¨ feat", name = "âœ¨ feat:       æ–°åŠŸèƒ½          (æ–°æ¥å£ã€æ–°ä¸šåŠ¡é€»è¾‘)" },
  { value = "ğŸ› fix", name = "ğŸ› fix:        ä¿®å¤ Bug        (æ¥å£é”™è¯¯ã€é€»è¾‘å¼‚å¸¸)" },
  { value = "â™»ï¸ refactor", name = "â™»ï¸  refactor:   ä»£ç é‡æ„        (ä¼˜åŒ–ä»£ç ç»“æ„ã€æå‡å¯ç»´æŠ¤æ€§)" },
  { value = "âš¡ï¸ perf", name = "âš¡ï¸ perf:       æ€§èƒ½ä¼˜åŒ–        (SQLä¼˜åŒ–ã€ç¼“å­˜ä¼˜åŒ–ã€å“åº”é€Ÿåº¦)" },
  { value = "ğŸ”’ security", name = "ğŸ”’ security:   å®‰å…¨ä¿®å¤        (æ¼æ´ä¿®å¤ã€æƒé™æ§åˆ¶)" },
  { value = "â¬†ï¸ upgrade", name = "â¬†ï¸  upgrade:    å‡çº§ä¾èµ–        (FastAPIã€Pydanticç­‰æ¡†æ¶å‡çº§)" },
  { value = "ğŸ”§ chore", name = "ğŸ”§ chore:      æ—¥å¸¸ç»´æŠ¤        (ä¾èµ–æ›´æ–°ã€é…ç½®è°ƒæ•´)" },
  { value = "ğŸ—ï¸ build", name = "ğŸ—ï¸  build:      æ„å»ºç›¸å…³        (Dockerã€éƒ¨ç½²è„šæœ¬)" },
  { value = "ğŸ‘· ci", name = "ğŸ‘· ci:         CI/CD           (GitHub Actionsã€è‡ªåŠ¨åŒ–æµç¨‹)" },
  { value = "ğŸ“ docs", name = "ğŸ“ docs:       æ–‡æ¡£æ›´æ–°        (APIæ–‡æ¡£ã€æ³¨é‡Šã€README)" },
  { value = "ğŸ¨ style", name = "ğŸ¨ style:      ä»£ç æ ¼å¼åŒ–      (Ruffã€Blackã€æ’ç‰ˆè°ƒæ•´)" },
  { value = "âœ… test", name = "âœ… test:       æµ‹è¯•ç›¸å…³        (å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•)" },
  { value = "ğŸ”¥ remove", name = "ğŸ”¥ remove:     ç§»é™¤ä»£ç         (åºŸå¼ƒæ¥å£ã€è¿‡æœŸæ¨¡å—)" },
  { value = "âª revert", name = "âª revert:     å›é€€æäº¤        (æ’¤é”€ä¹‹å‰çš„æ›´æ”¹)" },
  { value = "ğŸ‰ init", name = "ğŸ‰ init:       åˆå§‹åŒ–" },
]

[[tool.commitizen.customize.questions]]
type = "input"
name = "scope"
message = """
è¯´æ˜æœ¬æ¬¡æäº¤çš„å½±å“èŒƒå›´ (å¯é€‰, è¯·ä½¿ç”¨è‹±æ–‡):
  - å•ä¸ªæ¨¡å—:                     system/user, system/auth, file, corn
  - å¤šä¸ªæ¨¡å— (ä½¿ç”¨é€—å·åˆ†éš”):      system/user,system/auth  æˆ–  core,common
  - å­æ¨¡å—ä½¿ç”¨ / åˆ†éš”:            common/exception, common/response

  å¸¸ç”¨èŒƒå›´:
  - system/user, file, corn       ä¸šåŠ¡æ¨¡å—
  - core, core/config             æ ¸å¿ƒåŠŸèƒ½: é…ç½®ç®¡ç†ã€ç¼“å­˜ç­–ç•¥...
  - common, common/exception      å…¬å…±æ¨¡å—: å¼‚å¸¸å¤„ç†ã€å“åº”å°è£…...
  - deploy                        éƒ¨ç½²è¿ç»´: Dockerã€Github Actionã€CI/CD...
  - middleware                    ä¸­é—´ä»¶: JWTã€CORS...

"""

[[tool.commitizen.customize.questions]]
type = "input"
name = "subject"
message = "ç®€çŸ­æè¿°æœ¬æ¬¡å˜æ›´ (å¿…å¡«), å¦‚: æ–°å¢ç”¨æˆ·ç™»å½•æ¥å£ã€ä¿®å¤è®¢å•çŠ¶æ€æ›´æ–°å¼‚å¸¸ã€é‡æ„æƒé™éªŒè¯ä¸­é—´ä»¶\n"

[[tool.commitizen.customize.questions]]
type = "input"
name = "body"
multiline = true
message = "æä¾›æ›´è¯¦ç»†çš„æäº¤æè¿° (å¯é€‰): å˜æ›´çš„å…·ä½“å†…å®¹å’ŒåŸå› , æŠ€æœ¯å®ç°ç»†èŠ‚, å½±å“èŒƒå›´è¯´æ˜, ç›¸å…³çš„ä¸šåŠ¡èƒŒæ™¯\n"

[[tool.commitizen.customize.questions]]
type = "input"
name = "footer"
multiline = true
message = """
é¡µè„šä¿¡æ¯ (å¯é€‰):
  - å…³è” Issue:       Closes #123, Fixes #456, Resolves #789
  - ç ´åæ€§å˜æ›´ (è§¦å‘ major ç‰ˆæœ¬å‡çº§):       BREAKING CHANGE: æè¿°

"""
